#!/usr/bin/env ruby
# frozen_string_literal: true


require "bundler/setup"
require "luo"
include Luo

commit_message = ARGV.join(" ")

messages = Messages.create.system(prompt: Luo::Prompts.luo_commit, context: {commit: commit_message}).to_a
response = OpenAI.new.chat(messages)
exec "git commit -m '#{response}'"